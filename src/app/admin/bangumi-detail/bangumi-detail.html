<nav class="nav-admin">
  <h1 class="ui header">编辑新番</h1>
</nav>
<div class="bangumi-container">
  <form (ngSubmit)="onSubmit()" class="bangumi-form ui form ui dimmable" [ngClass]="{dimmed: !bangumi.bgm_id}">
    <div class="ui simple inverted dimmer">
      <div class="ui loader"></div>
    </div>
    <section class="bangumi-info">
      <div class="bangumi-image">
        <img src="{{bangumi.cover || bangumi.image}}" alt="image">
      </div>
      <div class="bangumi-basic-info">
        <div class="field">
          <label>番组名</label>
          <input type="text" [(ngModel)]="bangumi.name" name="name"/>
        </div>
        <div class="field">
          <label>中文名</label>
          <input type="text" [(ngModel)]="bangumi.name_cn" name="name_cn"/>
        </div>
        <div class="field">
          <label>放送开始</label>
          <input type="text" [(ngModel)]="bangumi.air_date" name="air_date"/>
        </div>
        <div class="field">
          <label>放送星期</label>
          <input type="text" [(ngModel)]="bangumi.air_weekday" name="air_weekday"/>
        </div>
        <div class="field">
          <label>DMHY</label>
          <keyword-builder [bangumi]="bangumi" [siteName]="'dmhy'"></keyword-builder>
        </div>
        <div class="field">
          <label>ACG_RIP</label>
          <keyword-builder [bangumi]="bangumi" [siteName]="'acg_rip'"></keyword-builder>
        </div>
        <div class="field">
          <label>集数偏移（解决某些集数不是从1开始的新番）</label>
          <input type="text" [(ngModel)]="bangumi.eps_no_offset" name="eps_no_offset"/>
        </div>
      </div>
    </section>
    <button class="ui right floated primary button" [ngClass]="{loading: isSavingBangumi}" type="submit">Save</button>
  </form>
  <div class="bangumi-episodes" *ngIf="bangumi.id">
    <h4 class="ui header">各话列表</h4>
    <div class="ui divider"></div>
    <div class="episode-list">
      <episode-detail class="episode-item ui segment" [episode]="episode" *ngFor="let episode of bangumi.episodes">
      </episode-detail>
    </div>
  </div>
</div>
