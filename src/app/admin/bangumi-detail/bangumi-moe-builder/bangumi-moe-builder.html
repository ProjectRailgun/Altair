<div class="bangumi-moe-builder-modal">
    <div class="search-bar">
        <div class="ui large label">
            <i class="rss icon"></i>
            萌番组
        </div>
        <div class="search-box ui input">
            <input type="text" name="query" placeholder="输入关键词搜索更多标签" #searchBox>
        </div>
        <div class="selected-tag">
            <div class="ui blue label" *ngFor="let tag of selectedTags">
                {{tag.locale.zh_cn || tag.name}}
                <a class="detail" (click)="removeTag(tag)"><i class="delete icon"></i></a>
            </div>
        </div>
    </div>
    <div class="ui info message">下方项目优先级高，例如，若当前标签匹配到多个第 1 集，最下方的第 1 集项目会被下载。</div>
    <div class="tag-container">
        <div class="tag-search-result" *ngIf="searchResultTags?.length > 0">
            <div class="tag-search-header">搜索结果</div>
            <a class="ui grey label" *ngFor="let tag of searchResultTags" (click)="selectTag(tag)">
                {{tag.locale.zh_cn || tag.name}}
            </a>
        </div>
        <div class="format-tags tag-list">
            <div class="tag-list-header">格式标签</div>
            <a class="ui label" *ngFor="let tag of formatTags" (click)="selectTag(tag)">
                {{tag.name}}
            </a>
            <div class="loading-tips" *ngIf="!formatTags">加载中...</div>
        </div>
        <div class="lang-tags tag-list">
            <div class="tag-list-header">语言</div>
            <a class="ui label" *ngFor="let tag of langTags" (click)="selectTag(tag)">
                {{tag.locale.zh_cn || tag.name}}
            </a>
            <div class="ui active centered inline loader" *ngIf="!langTags">加载中...</div>
        </div>
        <div class="misc-tags tag-list">
            <div class="tag-list-header">杂项</div>
            <a class="ui label" *ngFor="let tag of miscTags" (click)="selectTag(tag)">
                {{tag.locale.zh_cn || tag.name}}
            </a>
            <div class="loading-tips" *ngIf="!miscTags">加载中...</div>
        </div>
        <div class="category-tags tag-list">
            <div class="tag-list-header">类别</div>
            <a class="ui label" *ngFor="let tag of categoryTags" (click)="selectTag(tag)">
                {{tag.locale.zh_cn || tag.name}}
            </a>
            <div class="loading-tips" *ngIf="!categoryTags">加载中...</div>
        </div>
        <div class="popular-team-tags tag-list">
            <div class="tag-list-header">热门字幕组</div>
            <a class="ui label" *ngFor="let tag of popularTeamTags" (click)="selectTag(tag)">
                {{tag.locale.zh_cn || tag.name}}
            </a>
            <div class="loading-tips" *ngIf="!popularTeamTags">加载中...</div>
        </div>
        <div class="popular-bangumi-tags tag-list">
            <div class="tag-list-header">热门番組</div>
            <a class="ui label" *ngFor="let tag of popularBangumiTags" (click)="selectTag(tag)">
                {{tag.locale.zh_cn || tag.name}}
            </a>
            <div class="loading-tips" *ngIf="!popularBangumiTags">加载中...</div>
        </div>
        <div class="torrent-result">
            <table class="ui table">
                <thead>
                <tr>
                    <th>标题</th>
                    <th>话数</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let torrent of torrentList">
                    <td>{{torrent.title}}</td>
                    <td>
                        <span class="ui label" *ngFor="let eps_no of torrent.eps_no_list">
                            {{eps_no === -1 ? "未知" : eps_no}}
                        </span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="footer">
        <button class="ui button" (click)="cancel()">取消</button>
        <button class="ui primary button" (click)="save()">保存</button>
    </div>
</div>